{"version":3,"sources":["webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/main.js","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue?54ba","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue?067e","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue?2ed9","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue?eea1","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue?8940","webpack:///D:/DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue?3196"],"names":["createPage","Page","data","phoneCode","codeMaxLength","timerStatus","defaultSeconds","seconds","postCodeTimer","avatarUrl","isShowWeChartAuth","uni","getStorageSync","phoneNum","wechartCode","isShowScanqr","onLoad","accessToken","refreshToken","switchTab","url","watch","newName","oldName","length","methods","openScanqr","_this","wx","scanCode","success","res","postData","ciphertext","result","then","checkSceneIncludesPhoneNum","catch","err","console","log","checkToken","verifyCode","showToast","title","icon","$validate","isPhone","mobile","code","login","wxGetUserInfo","getUserInfo","provider","infoRes","setStorageSync","e","fail","triggerLogin","showLoading","iv","signature","encryptedData","hideLoading","loginRes","getPhoneNum","initTimer","setInterval","clearInterval"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=139636cd&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"DeTelecomfraud/01_Source/Code/App/uni-tfft/pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=139636cd&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isShowScanqr = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport Api_Urls from '../../api/Api_Urls.js'\r\nimport {UserLogin,GetVerifyCode,VerifyCode, CheckUserPhoneNumIsValide} from '@/api/modules/user.js'\r\nimport {AddScene} from '@/api/modules/scene.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tphoneCode: null, //输入的验证码\r\n\t\t\tcodeMaxLength: 6, //验证码长度\r\n\t\t\ttimerStatus: 0,\r\n\t\t\tdefaultSeconds: 10,\r\n\t\t\tseconds: 0,\r\n\t\t\tpostCodeTimer: null,\r\n\r\n\t\t\tavatarUrl: null,\r\n\t\t\tisShowWeChartAuth: uni.getStorageSync('isShowWeChartAuth') || false, //默认为 true\r\n\t\t\t\r\n\t\t\tphoneNum: '', //手机号\r\n\t\t\tdata: null, //授权信息字段\r\n\t\t\twechartCode: null,//微信授权code\r\n\t\t\tisShowScanqr: false,\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\t//this.checkToken();\r\n\t\tvar accessToken = uni.getStorageSync('access-token');\r\n\t\tvar refreshToken = uni.getStorageSync('refresh-token');\r\n\t\t//todo 验证\r\n\t\tif(accessToken != null && accessToken != '' && refreshToken != null && refreshToken != ''){\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/scene/scene'\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t},\r\n\twatch: {\r\n\t\tphoneCode(newName, oldName) {\r\n\t\t\t//当输入位数到达设定时候\r\n\t\t\tif (this.phoneCode != null && this.phoneCode.length > this.codeMaxLength) {\r\n\t\t\t\tthis.phoneCode = oldName;\r\n\t\t\t\t//this.handlerLogin();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t\r\n\t\t/**\r\n\t\t * 二维码扫码\r\n\t\t */\r\n\t\topenScanqr(){\r\n\t\t\tconst _this = this;\r\n\t\t\t// 允许从相机和相册扫码\r\n\t\t\twx.scanCode({\r\n\t\t\t\tsuccess (res) {\r\n\t\t\t\t\tlet postData= {\r\n\t\t\t\t\t\tciphertext: res.result\r\n\t\t\t\t\t}\r\n\t\t\t\t\tAddScene(postData).then(res=>{\r\n\t\t\t\t\t\tif(res && res.data){\r\n\t\t\t\t\t\t\t_this.isShowScanqr = false;\r\n\t\t\t\t\t\t\t_this.checkSceneIncludesPhoneNum();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tconsole.log('扫码添加案件失败！')\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t  \r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 检查token(刷新token待确定)\r\n\t\t */\r\n\t\tcheckToken(){\r\n\t\t\t//如果有token并且token有效\r\n\t\t\tif(true){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/scene/scene'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 验证验证码\r\n\t\t */\r\n\t\tverifyCode(){\r\n\t\t\tconst _this = this;\r\n\t\t\tif(_this.phoneNum == null || _this.phoneNum == ''){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '手机号不能为空',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.$validate.isPhone(_this.phoneNum)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: '请输入正确的手机号'\r\n\t\t\t\t})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(_this.phoneCode == null || _this.phoneCode == ''){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '验证码不能为空',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(_this.phoneCode.length<6){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '验证码必须是6位数字',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tVerifyCode({mobile: _this.phoneNum,code: _this.phoneCode}).then(res=>{\r\n\t\t\t\tif(res && res.data){\r\n\t\t\t\t\t_this.checkSceneIncludesPhoneNum();\r\n\t\t\t\t}\r\n\t\t\t}).catch(err=>{\r\n\t\t\t\tconsole.log('验证码服务发生错误！')\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * check 当前手机号是否被包含在案件中\r\n\t\t */\r\n\t\tcheckSceneIncludesPhoneNum(){\r\n\t\t\tconst _this = this;\r\n\t\t\tCheckUserPhoneNumIsValide(this.phoneNum).then(res=>{\r\n\t\t\t\t//手机号被案件包含的次数\r\n\t\t\t\tif(res.data>0){\r\n\t\t\t\t\t_this.login();//执行登录\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_this.isShowScanqr = true;\r\n\t\t\t\t}\r\n\t\t\t}).catch(err=>{\r\n\t\t\t\tconsole.log('验证案件是否包含时候失败！')\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t/* if(false){\r\n\t\t\t\tthis.login();\r\n\t\t\t}else{\r\n\t\t\t\tthis.isShowScanqr = true;\r\n\t\t\t} */\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t//第一授权获取用户信息===》按钮触发\r\n\t\twxGetUserInfo() {\r\n\t\t\tlet _this = this;\r\n\t\t\t/* uni.showLoading({\r\n\t\t\t\ttitle: '登录中...'\r\n\t\t\t}); */\r\n\t\t\t\r\n\t\t\tuni.getUserInfo({\r\n\t\t\t\tprovider: 'weixin',\r\n\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t/* _this.nickName = infoRes.userInfo.nickName; //昵称\r\n\t\t\t\t\t_this.avatarUrl = infoRes.userInfo.avatarUrl; //头像 */\r\n\t\t\t\t\t_this.data = infoRes;\r\n\t\t\t\t\t_this.isShowWeChartAuth = false;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync('isShowWeChartAuth', false); //记录是否第一次授权  false:表示不是第一次授权\r\n\t\t\t\t\t\t//_this.triggerLogin()\r\n\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t},\r\n\t\t\t\tfail(res) {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/* uni.switchTab({\r\n\t\t\t\turl: '/pages/scene/scene'\r\n\t\t\t}) */\r\n\t\t}, //登录\r\n\t\t\r\n\t\t/**\r\n\t\t * 最后一步，登录\r\n\t\t */\r\n\t\ttriggerLogin(){\r\n\t\t\t//AppID: 'wx23abff1e4e2875ba',\r\n\t\t\t//AppSecret: '3b5d06873fcd2e88692806eaaf2bc067',\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '登录中...'\r\n\t\t\t});\r\n\t\t\tconst _this = this;\r\n\t\t\tlet postData = {\r\n\t\t\t\tiv: _this.data.iv,\r\n\t\t\t\tsignature: _this.data.signature,\r\n\t\t\t\tencryptedData: _this.data.encryptedData,\r\n\t\t\t\tcode: _this.wechartCode,\r\n\t\t\t\tmobile: _this.phoneNum,\r\n\t\t\t}\r\n\t\t\tUserLogin(postData).then(res=>{\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tif(res && res.data){\r\n\t\t\t\t\tif(res != null && res != ''){\r\n\t\t\t\t\t\tuni.setStorageSync('access-token',res.data.accessToken)\r\n\t\t\t\t\t\tuni.setStorageSync('refresh-token',res.data.refreshToken)\r\n\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\turl: '/pages/scene/scene'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).catch(err=>{\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tconsole.log('登录失败！')\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\tlogin() {\r\n\t\t\tlet _this = this;\r\n\t\t\t/* uni.showLoading({\r\n\t\t\t\ttitle: '登录中...'\r\n\t\t\t}); */\r\n\t\t\t// 1.wx获取登录用户code\r\n\t\t\tuni.login({\r\n\t\t\t\tprovider: 'weixin',\r\n\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t_this.wechartCode = loginRes.code;\r\n\t\t\t\t\tif (!_this.isShowWeChartAuth) {\r\n\t\t\t\t\t\t//非第一次授权获取用户信息\r\n\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t\t\t\t//获取用户信息后向调用信息更新方法\r\n\t\t\t\t\t\t\t\t//this.nickName = infoRes.userInfo.nickName; //昵称\r\n\t\t\t\t\t\t\t\t//this.avatarUrl = infoRes.userInfo.avatarUrl; //头像\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('wxInfo',infoRes)\r\n\t\t\t\t\t\t\t\t_this.data = infoRes;\r\n\t\t\t\t\t\t\t\t_this.triggerLogin(); //调用更新信息方法\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\t\t//uni.hideLoading();\r\n\t\t\t\t\t\t\t\t_this.isShowWeChartAuth = true;\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 点击获取验证码\r\n\t\t */\r\n\t\tgetPhoneNum() {\r\n\t\t\tthis.timerStatus = 1;\r\n\t\t\tthis.initTimer();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 验证码倒计时\r\n\t\t */\r\n\t\tinitTimer() {\r\n\t\t\tthis.seconds = this.defaultSeconds;\r\n\t\t\tthis.postCodeTimer = setInterval(() => {\r\n\t\t\t\tif (this.seconds == 0) {\r\n\t\t\t\t\tclearInterval(this.postCodeTimer);\r\n\t\t\t\t\tthis.timerStatus = 2;\r\n\t\t\t\t}\r\n\t\t\t\tthis.seconds -= 1;\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588852841680\n      var cssReload = require(\"D:/SoftWare/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}